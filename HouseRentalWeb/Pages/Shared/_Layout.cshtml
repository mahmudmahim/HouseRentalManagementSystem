@{
    Layout = null;
    var currentPath = ViewContext.HttpContext.Request.Path.Value?.ToLower();
    bool isDashboard = currentPath != null && currentPath.Contains("/dashboard");
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>House Rental Management</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/auth.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/tenantdashboard.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/ownerdashboard.css" asp-append-version="true" />
</head>
<body class="@(isDashboard ? "dashboard-body" : "")">

    <!-- Top Navbar -->
    <header class="navbar navbar-expand-lg navbar-dark bg-gradient shadow-sm px-4">
        <div class="container">
            <a class="navbar-brand fw-bold fs-4 gradient-text" href="/">🏠 UrbanNest</a>

            <div class="d-flex ms-auto px-4 pe-4">
                @if (isDashboard)
                {
                    <a asp-page="/Auth/Logout" class="btn signup-btn me-2">Logout</a>
                    <a asp-page="/Property/List" class="btn signup-btn">List Property</a>
                }
                else
                {
                    <a asp-page="/Auth/Login" class="btn login-btn me-2">Login</a>
                    <a asp-page="/Auth/Signup" class="btn signup-btn">Sign Up</a>
                }
            </div>
        </div>
    </header>

    <!-- Dashboard Sidebar + Content -->
    @if (isDashboard)
    {
        <div class="d-flex dashboard-wrapper">

            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header px-3 mb-3 d-flex justify-content-between align-items-center">
                    <h3 class="brand fw-bold text-white">🏠 UrbanNest</h3>
                    <button class="btn btn-sm btn-light d-lg-none" id="sidebarToggle"><i class="bi bi-list"></i></button>
                </div>

                <ul class="nav flex-column sidebar-menu px-2">
                    <li class="nav-item">
                        <a asp-page="/Dashboard/Index" class="nav-link">
                            <i class="bi bi-speedometer2 me-2"></i> <span>Dashboard</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a asp-page="/Dashboard/Requests" class="nav-link">
                            <i class="bi bi-inboxes me-2"></i><span>Tenant Requests</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a asp-page="/Dashboard/Properties" class="nav-link">
                            <i class="bi bi-building me-2"></i> <span>My Properties</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a asp-page="/Dashboard/Wallet" class="nav-link">
                            <i class="bi bi-wallet2 me-2"></i> <span>Wallet & Credits</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a asp-page="/Dashboard/Subscription" class="nav-link">
                            <i class="bi bi-credit-card-2-back me-2"></i> <span>Subscription</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a asp-page="/Dashboard/Settings" class="nav-link">
                            <i class="bi bi-gear me-2"></i>  <span>Settings</span>
                        </a>
                    </li>

                    <li class="nav-item mt-3">
                        <a asp-page="/Auth/Logout" class="nav-link text-danger">
                            <i class="bi bi-box-arrow-right me-2"></i> <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="content-area has-sidebar flex-grow-1 p-4" id="mainContent">
                @RenderBody()
            </main>
        </div>
    }
    else
    {
        <!-- Normal pages (No sidebar) -->
        <main class="content-area">
            @RenderBody()
        </main>
    }

    <footer class="bg-light text-center py-3 mt-auto border-top">
        <p class="mb-0 text-muted small">
            &copy; @DateTime.Now.Year All Rights Reserved to Group-03 CSE67E - House Rental Management System
        </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    @if (isDashboard)
    {
        <script src="~/js/site.js">  </script>
    }
    @RenderSection("Scripts", required: false)
</body>
</html>
